!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.GeneralStore=e()}}(function(){return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}for(var i="function"==typeof require&&require,o=0;o<r.length;o++)s(r[o]);return s}({1:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function define(){return new _storeStoreDefinitionJs2["default"]}Object.defineProperty(exports,"__esModule",{value:!0}),exports.define=define;var _storeStoreDefinitionJs=_dereq_(13),_storeStoreDefinitionJs2=_interopRequireDefault(_storeStoreDefinitionJs),_dispatcherDispatcherInstanceJs=_dereq_(2),_dispatcherDispatcherInstanceJs2=_interopRequireDefault(_dispatcherDispatcherInstanceJs),_mixinStoreDependencyMixinJs=_dereq_(7),_mixinStoreDependencyMixinJs2=_interopRequireDefault(_mixinStoreDependencyMixinJs),DispatcherInstance=_dispatcherDispatcherInstanceJs2["default"];exports.DispatcherInstance=DispatcherInstance;var StoreDependencyMixin=_mixinStoreDependencyMixinJs2["default"];exports.StoreDependencyMixin=StoreDependencyMixin},{13:13,2:2,7:7}],2:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(exports,"__esModule",{value:!0});var _DispatcherInterfaceJs=_dereq_(3),_invariantJs=_dereq_(6),_invariantJs2=_interopRequireDefault(_invariantJs),instance=null,DispatcherInstance={get:function(){return instance},set:function(e){_invariantJs2["default"](_DispatcherInterfaceJs.isDispatcher(e),'DispatcherInstance.set: Expected dispatcher to be an object with a register method, and an unregister method but got "%s". Learn more about the dispatcher interface: https://github.com/HubSpot/general-store#dispatcher-interface',e),instance=e}};exports["default"]=DispatcherInstance,module.exports=exports["default"]},{3:3,6:6}],3:[function(_dereq_,module,exports){"use strict";function isDispatcher(e){return"object"==typeof e&&"function"==typeof e.register&&"function"==typeof e.unregister}function isPayload(e){return null!==e&&"object"==typeof e&&"string"==typeof e.actionType}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDispatcher=isDispatcher,exports.isPayload=isPayload},{}],4:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var r=0;r<n.length;r++){var t=n[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(n,r,t){return r&&e(n.prototype,r),t&&e(n,t),n}}(),_EventHandlerJs=_dereq_(5),_EventHandlerJs2=_interopRequireDefault(_EventHandlerJs),_uniqueidUniqueIDJs=_dereq_(15),_uniqueidUniqueIDJs2=_interopRequireDefault(_uniqueidUniqueIDJs),Event=function(){function e(){_classCallCheck(this,e),this._handlers={}}return _createClass(e,[{key:"addHandler",value:function(e){var n=_uniqueidUniqueIDJs2["default"]();return this._handlers[n]=e,new _EventHandlerJs2["default"](this,n)}},{key:"remove",value:function(){return this._handlers={},this}},{key:"removeHandler",value:function(e){return delete this._handlers[e],this}},{key:"_runHandler",value:function(e){this._handlers.hasOwnProperty(e)&&this._handlers[e].call()}},{key:"runHandlers",value:function(){return Object.keys(this._handlers).forEach(this._runHandler.bind(this)),this}}],[{key:"runMultiple",value:function(e){e.forEach(function(e){return e.runHandlers()})}}]),e}();exports["default"]=Event,module.exports=exports["default"]},{15:15,5:5}],5:[function(_dereq_,module,exports){"use strict";function _classCallCheck(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,n){for(var t=0;t<n.length;t++){var a=n[t];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(n,t,a){return t&&e(n.prototype,t),a&&e(n,a),n}}(),EventHandler=function(){function e(n,t){_classCallCheck(this,e),this._key=t,this._instance=n}return _createClass(e,[{key:"remove",value:function(){null!==this._instance&&void 0!==this._instance&&(this._instance.removeHandler(this._key),this._instance=null)}}]),e}();exports["default"]=EventHandler,module.exports=exports["default"]},{}],6:[function(_dereq_,module,exports){"use strict";function invariant(e,r,n,i,t,o,a,d){if(!e){var s;throw s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.")}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=invariant,module.exports=exports["default"]},{}],7:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function StoreDependencyMixin(e){var n=(Object.keys(e),!1);return{componentWillMount:function(){n&&_StoreDependencyMixinHandlersJs.setupHandlers(this)},componentWillReceiveProps:function(e){n&&_StoreDependencyMixinTransitionsJs.hasPropsChanged(this.props,e)&&this.setState(_StoreDependencyMixinStateJs.getDependencyState(this,e,this.state,null))},componentWillUnmount:function(){n&&_StoreDependencyMixinHandlersJs.cleanupHandlers(this)},componentDidUpdate:function(e,t){n&&_StoreDependencyMixinTransitionsJs.hasStateChanged(_StoreDependencyMixinFieldsJs.dependencies(this),t,this.state)&&this.setState(_StoreDependencyMixinStateJs.getDependencyState(this,this.props,this.state,null))},getInitialState:function(){return n=!_StoreDependencyMixinFieldsJs.stores(this).length,_StoreDependencyMixinInitializeJs.applyDependencies(this,e),_StoreDependencyMixinStateJs.getDependencyState(this,this.props,this.state,Object.keys(e))}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=StoreDependencyMixin;var _storeStoreFacadeJs=_dereq_(14),_StoreDependencyMixinFieldsJs=(_interopRequireDefault(_storeStoreFacadeJs),_dereq_(8)),_StoreDependencyMixinHandlersJs=_dereq_(9),_StoreDependencyMixinInitializeJs=_dereq_(10),_StoreDependencyMixinStateJs=_dereq_(11),_StoreDependencyMixinTransitionsJs=_dereq_(12);module.exports=exports["default"]},{10:10,11:11,12:12,14:14,8:8,9:9}],8:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function getKey(e,t,n){return n.hasOwnProperty(e)||(n[e]=t),n[e]}function dependencies(e){return getKey(DEPENDENCIES_KEY,{},e)}function handlers(e){return getKey(HANDLERS_KEY,[],e)}function queue(e){return getKey(QUEUE_KEY,{},e)}function stores(e){return getKey(STORES_KEY,[],e)}function storeFields(e){return getKey(STORE_FIELDS_KEY,{},e)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.dependencies=dependencies,exports.handlers=handlers,exports.queue=queue,exports.stores=stores,exports.storeFields=storeFields;var _eventEventHandlerJs=_dereq_(5),_storeStoreFacadeJs=(_interopRequireDefault(_eventEventHandlerJs),_dereq_(14)),DEPENDENCIES_KEY=(_interopRequireDefault(_storeStoreFacadeJs),"__StoreDependencyMixin-dependencies"),HANDLERS_KEY="__StoreDependencyMixin-eventHandlers",QUEUE_KEY="__StoreDependencyMixin-queue",STORES_KEY="__StoreDependencyMixin-stores",STORE_FIELDS_KEY="__StoreDependencyMixin-storeFields"},{14:14,5:5}],9:[function(_dereq_,module,exports){"use strict";function flushQueue(e){var n=_StoreDependencyMixinFieldsJs.dependencies(e),s=_StoreDependencyMixinFieldsJs.queue(e),t={};Object.keys(s).forEach(function(r){var i=n[r];t[r]=i.deref(e.props,e.state,i.stores),delete s[r]}),e.setState(t)}function waitForOtherStores(e,n){var s=_StoreDependencyMixinFieldsJs.stores(e);s.forEach(function(e){var s=e.getDispatcher();e.getID()!==n&&s.isDispatching()&&s.waitFor([e.getDispatchToken()])})}function handleStoreChange(e,n){var s=_StoreDependencyMixinFieldsJs.queue(e),t=0===Object.keys(s).length;_StoreDependencyMixinFieldsJs.storeFields(e)[n].forEach(function(e){s.hasOwnProperty(e)||(s[e]=!0)}),t&&(waitForOtherStores(e,n),flushQueue(e))}function cleanupHandlers(e){for(var n=_StoreDependencyMixinFieldsJs.handlers(e);n.length;)n.pop().remove()}function setupHandlers(e){var n=_StoreDependencyMixinFieldsJs.handlers(e),s=_StoreDependencyMixinFieldsJs.stores(e);s.forEach(function(s){n.push(s.addOnChange(handleStoreChange.bind(null,e,s.getID())))})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.cleanupHandlers=cleanupHandlers,exports.setupHandlers=setupHandlers;var _StoreDependencyMixinFieldsJs=_dereq_(8)},{8:8}],10:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function defaultDeref(e,r,n){return n[0].get()}function applyDependencies(e,r){var n=_StoreDependencyMixinFieldsJs.dependencies(e),t=_StoreDependencyMixinFieldsJs.storeFields(e),i=_StoreDependencyMixinFieldsJs.stores(e);Object.keys(r).forEach(function(e){var s,a=r[e];a instanceof _storeStoreFacadeJs2["default"]?(s=[a],_invariantJs2["default"](!n.hasOwnProperty(e),'StoreDependencyMixin: field "%s" is already defined',e),n[e]={deref:defaultDeref,stores:s}):(s=a.stores,n[e]=a),s.forEach(function(r){var n=r.getID();t.hasOwnProperty(n)||(t[n]=[],i.push(r)),t[n].push(e)})})}Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyDependencies=applyDependencies;var _invariantJs=_dereq_(6),_invariantJs2=_interopRequireDefault(_invariantJs),_StoreDependencyMixinFieldsJs=_dereq_(8),_storeStoreFacadeJs=_dereq_(14),_storeStoreFacadeJs2=_interopRequireDefault(_storeStoreFacadeJs)},{14:14,6:6,8:8}],11:[function(_dereq_,module,exports){"use strict";function getDependencyState(e,n,t,r){var i=_StoreDependencyMixinFieldsJs.dependencies(e);r=r||Object.keys(i);var s={};return r.forEach(function(e){var r=i[e],d=r.deref,c=r.stores;s[e]=d(n,t,c)}),s}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDependencyState=getDependencyState;var _StoreDependencyMixinFieldsJs=_dereq_(8)},{8:8}],12:[function(_dereq_,module,exports){"use strict";function compareKey(r,e,n){return compare(e[r],n[r])}function shallowEqual(r,e,n){if(e===n)return!0;var t;for(t in e)if(e.hasOwnProperty(t)&&(!n.hasOwnProperty(t)||!r(t,e,n)))return!1;for(t in n)if(n.hasOwnProperty(t)&&!e.hasOwnProperty(t))return!1;return!0}function hasPropsChanged(r,e){return!shallowEqual(compareKey,r,e)}function hasStateChanged(r,e,n){return!shallowEqual(function(e,n,t){return r.hasOwnProperty(e)||compare(n[e],t[e])},e,n)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.hasPropsChanged=hasPropsChanged,exports.hasStateChanged=hasStateChanged;var compare=window.Immutable&&"function"==typeof window.Immutable.is?window.Immutable.is:function(r,e){return r===e}},{}],13:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function emptyGetter(){return null}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_dispatcherDispatcherInstanceJs=_dereq_(2),_dispatcherDispatcherInstanceJs2=_interopRequireDefault(_dispatcherDispatcherInstanceJs),_dispatcherDispatcherInterfaceJs=_dereq_(3),_invariantJs=_dereq_(6),_invariantJs2=_interopRequireDefault(_invariantJs),_StoreFacadeJs=_dereq_(14),_StoreFacadeJs2=_interopRequireDefault(_StoreFacadeJs),HINT_LINK="Learn more about defining stores: https://github.com/HubSpot/general-store#create-a-store",StoreDefinition=function(){function e(){_classCallCheck(this,e),this._facade=null,this._getter=null,this._responses={}}return _createClass(e,[{key:"defineGet",value:function(e){return _invariantJs2["default"](!this.isRegistered(),"StoreDefinition.defineGet: this store definition cannot be modified because is has already been registered with a dispatcher. %s",HINT_LINK),_invariantJs2["default"]("function"==typeof e,'StoreDefinition.defineGet: expected getter to be a function but got "%s" instead. %s',e,HINT_LINK),this._getter=e,this}},{key:"defineResponseTo",value:function(e,t){var n=this;return _invariantJs2["default"](!this.isRegistered(),"StoreDefinition.defineResponseTo: this store definition cannot be modified because is has already been registered with a dispatcher. %s",HINT_LINK),[].concat(e).forEach(function(e){return n._setResponse(e,t)}),this}},{key:"isRegistered",value:function(){return this._facade instanceof _StoreFacadeJs2["default"]}},{key:"register",value:function(e){e=e||_dispatcherDispatcherInstanceJs2["default"].get(),_invariantJs2["default"](null!==e&&"object"==typeof e,"StoreDefinition.register: you haven't provide a dispatcher instance. You can pass an instance to GeneralStore.define().register(dispatcher) or use GeneralStore.DispatcherInstance.set(dispatcher) to set a global instance. https://github.com/HubSpot/general-store#default-dispatcher-instance"),_invariantJs2["default"](_dispatcherDispatcherInterfaceJs.isDispatcher(e),'StoreDefinition.register: Expected dispatcher to be an object with a register method, and an unregister method but got "%s". Learn more about the dispatcher interface: https://github.com/HubSpot/general-store#dispatcher-interface',e),_invariantJs2["default"]("function"==typeof this._getter,"StoreDefinition.register: a store cannot be registered without a getter. Use GeneralStore.define().defineGet(getter) to define a getter. %s",HINT_LINK);var t=this._facade||new _StoreFacadeJs2["default"](this._getter||emptyGetter,this._responses,e);return null===this._facade&&(this._facade=t),t}},{key:"_setResponse",value:function(e,t){_invariantJs2["default"]("string"==typeof e,'StoreDefinition.defineResponseTo: expected actionType to be a string but got "%s" instead. %s',e,HINT_LINK),_invariantJs2["default"](!this._responses.hasOwnProperty(e),'StoreDefinition.defineResponseTo: conflicting resposes for actionType "%s". Only one response can be defined per actionType per Store. %s',e,HINT_LINK),_invariantJs2["default"]("function"==typeof t,'StoreDefinition.defineResponseTo: expected response to be a function but got "%s" instead. %s',t),this._responses[e]=t}}]),e}();exports["default"]=StoreDefinition,module.exports=exports["default"]},{14:14,2:2,3:3,6:6}],14:[function(_dereq_,module,exports){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function getNull(){return null}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),_eventEventJs=(_dereq_(3),_dereq_(4)),_eventEventJs2=_interopRequireDefault(_eventEventJs),_eventEventHandlerJs=_dereq_(5),_invariantJs=(_interopRequireDefault(_eventEventHandlerJs),_dereq_(6)),_invariantJs2=_interopRequireDefault(_invariantJs),_uniqueidUniqueIDJs=_dereq_(15),_uniqueidUniqueIDJs2=_interopRequireDefault(_uniqueidUniqueIDJs),HINT_LINK="Learn more about using the Store API: https://github.com/HubSpot/general-store#using-the-store-api",StoreFacade=function(){function e(t,n,r){_classCallCheck(this,e),this._dispatcher=r,this._getter=t,this._responses=n,this._event=new _eventEventJs2["default"],this._uid=_uniqueidUniqueIDJs2["default"](),this._dispatchToken=this._dispatcher.register(this._handleDispatch.bind(this))}return _createClass(e,[{key:"addOnChange",value:function(e){return _invariantJs2["default"]("function"==typeof e,'StoreFacade.addOnChange: expected callback to be a function but got "%s" instead. %s',e,HINT_LINK),this._event.addHandler(e)}},{key:"get",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this._getter.apply(null,t)}},{key:"getDispatcher",value:function(){return this._dispatcher}},{key:"getDispatchToken",value:function(){return this._dispatchToken}},{key:"getID",value:function(){return this._uid}},{key:"_handleDispatch",value:function(e){this._responses.hasOwnProperty(e.actionType)&&(this._responses[e.actionType](e.data,e.actionType,e),this.triggerChange())}},{key:"remove",value:function(){this._dispatcher.unregister(this.getDispatchToken()),this._event.remove(),this._getter=getNull,this._responses={}}},{key:"triggerChange",value:function(){return this._event.runHandlers(),this}}]),e}();exports["default"]=StoreFacade,module.exports=exports["default"]},{15:15,3:3,4:4,5:5,6:6}],15:[function(_dereq_,module,exports){"use strict";function uid(){return PREFIX+nextUid++}Object.defineProperty(exports,"__esModule",{value:!0}),exports["default"]=uid;var PREFIX="uid_",nextUid=0;module.exports=exports["default"]},{}]},{},[1])(1)});