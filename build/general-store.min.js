!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.GeneralStore=t():e.GeneralStore=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(){return new s.default}function o(){return new c.default({})}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),s=r(a),u=n(7),c=r(u),f=n(6),d=r(f),l=n(10),p=r(l);t.default={define:i,defineFactory:o,DispatcherInstance:d.default,StoreDependencyMixin:p.default},e.exports=t.default},function(e,t,n){"use strict";function r(e,t,n,r,i,o,a,s){if(!e){var u;throw u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.")}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(){return null}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=(n(4),n(9)),u=r(s),c=n(5),f=(r(c),n(1)),d=r(f),l=n(8),p=r(l),h="Learn more about using the Store API: https://github.com/HubSpot/general-store#using-the-store-api",y=function(){function e(t){var n=t.dispatcher,r=t.getter,o=t.initialData,a=t.responses;i(this,e),this._dispatcher=n,this._getter=r,this._state=o,this._responses=a,this._event=new u.default,this._uid=p.default(),this._dispatchToken=this._dispatcher.register(this._handleDispatch.bind(this))}return a(e,[{key:"addOnChange",value:function(e){return d.default("function"==typeof e,'StoreFacade.addOnChange: expected callback to be a function but got "%s" instead. %s',e,h),this._event.addHandler(e)}},{key:"get",value:function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return this._getter.apply(this,[this._state].concat(t))}},{key:"getDispatcher",value:function(){return this._dispatcher}},{key:"getDispatchToken",value:function(){return this._dispatchToken}},{key:"getID",value:function(){return this._uid}},{key:"_handleDispatch",value:function(e){this._responses.hasOwnProperty(e.actionType)&&(this._state=this._responses[e.actionType](this._state,e.data,e.actionType,e),this.triggerChange())}},{key:"remove",value:function(){this._dispatcher.unregister(this.getDispatchToken()),this._event.remove(),this._getter=o,this._responses={}}},{key:"triggerChange",value:function(){return this._event.runHandlers(),this}}]),e}();t.default=y,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return n.hasOwnProperty(e)||(n[e]=t),n[e]}function o(e){return i(l,{},e)}function a(e){return i(p,[],e)}function s(e){return i(h,{},e)}function u(e){return i(y,[],e)}function c(e){return i(g,{},e)}Object.defineProperty(t,"__esModule",{value:!0}),t.dependencies=o,t.handlers=a,t.queue=s,t.stores=u,t.storeFields=c;var f=n(5),d=(r(f),n(2)),l=(r(d),"__StoreDependencyMixin-dependencies"),p="__StoreDependencyMixin-eventHandlers",h="__StoreDependencyMixin-queue",y="__StoreDependencyMixin-stores",g="__StoreDependencyMixin-storeFields"},function(e,t){"use strict";function n(e){return"object"==typeof e&&"function"==typeof e.register&&"function"==typeof e.unregister}function r(e){return null!==e&&"object"==typeof e&&"string"==typeof e.actionType}Object.defineProperty(t,"__esModule",{value:!0}),t.isDispatcher=n,t.isPayload=r},function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=function(){function e(t,r){n(this,e),this._key=r,this._instance=t}return r(e,[{key:"remove",value:function(){null!==this._instance&&void 0!==this._instance&&(this._instance.removeHandler(this._key),this._instance=null)}}]),e}();t.default=i,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(4),o=n(1),a=r(o),s=null,u={get:function(){return s},set:function(e){a.default(i.isDispatcher(e),'DispatcherInstance.set: Expected dispatcher to be an object with a register method, and an unregister method but got "%s". Learn more about the dispatcher interface: https://github.com/HubSpot/general-store#dispatcher-interface',e),s=e}};t.default=u,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t,n){l.default("string"==typeof t,'StoreFactory.defineResponses: expected actionType to be a string but got "%s" instead. %s',t,y),l.default(!e.hasOwnProperty(t),'StoreFactory.defineResponses: conflicting resposes for actionType "%s". Only one response can be defined per actionType per Store. %s',t,y),l.default("function"==typeof n,'StoreFactory.defineResponses: expected response to be a function but got "%s" instead. %s',n)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(6),c=r(u),f=n(4),d=n(1),l=r(d),p=n(2),h=r(p),y="Learn more about defining stores: https://github.com/HubSpot/general-store#create-a-store",g=function(){function e(t){var n=t.getter,r=t.initialData,o=t.responses;i(this,e),this._definition={getter:n,initialData:r,responses:o||{}}}return s(e,[{key:"defineGet",value:function(t){return l.default("function"!=typeof this._definition.getter,"StoreFactory.defineGet: a getter is already defined."),new e(a({},this._definition,{getter:t}))}},{key:"defineInitialData",value:function(t){return l.default(void 0===this._definition.initialData,"StoreFactory.defineInitialData: initialData is already defined."),new e(a({},this._definition,{initialData:t}))}},{key:"defineResponses",value:function(t){l.default(t&&"object"==typeof t,"StoreFactory.defineResponses: newResponses must be an object");var n=this._definition.responses;return Object.keys(t).forEach(function(e){return o(n,e,t[e])}),new e(a({},this._definition,{responses:a({},n,t)}))}},{key:"getDefinition",value:function(){return this._definition}},{key:"register",value:function(e){return e=e||c.default.get(),l.default(null!==e&&"object"==typeof e,"StoreFactory.register: you haven't provide a dispatcher instance. You can pass an instance to GeneralStore.define().register(dispatcher) or use GeneralStore.DispatcherInstance.set(dispatcher) to set a global instance. https://github.com/HubSpot/general-store#default-dispatcher-instance"),l.default(f.isDispatcher(e),'StoreFactory.register: Expected dispatcher to be an object with a register method, and an unregister method but got "%s". Learn more about the dispatcher interface: https://github.com/HubSpot/general-store#dispatcher-interface',e),new h.default(a({},this._definition,{dispatcher:e}))}}]),e}();t.default=g,e.exports=t.default},function(e,t){"use strict";function n(){return r+i++}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var r="uid_",i=0;e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(5),s=r(a),u=n(8),c=r(u),f=function(){function e(){i(this,e),this._handlers={}}return o(e,[{key:"addHandler",value:function(e){var t=c.default();return this._handlers[t]=e,new s.default(this,t)}},{key:"remove",value:function(){return this._handlers={},this}},{key:"removeHandler",value:function(e){return delete this._handlers[e],this}},{key:"_runHandler",value:function(e){this._handlers.hasOwnProperty(e)&&this._handlers[e].call()}},{key:"runHandlers",value:function(){return Object.keys(this._handlers).forEach(this._runHandler.bind(this)),this}}],[{key:"runMultiple",value:function(e){e.forEach(function(e){return e.runHandlers()})}}]),e}();t.default=f,e.exports=t.default},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=(Object.keys(e),!1);return{componentWillMount:function(){t&&s.setupHandlers(this)},componentWillReceiveProps:function(e){t&&f.hasPropsChanged(this.props,e)&&this.setState(c.getDependencyState(this,e,this.state,null))},componentWillUnmount:function(){t&&s.cleanupHandlers(this)},componentDidUpdate:function(e,n){t&&f.hasStateChanged(a.dependencies(this),n,this.state)&&this.setState(c.getDependencyState(this,this.props,this.state,null))},getInitialState:function(){return t=!a.stores(this).length,u.applyDependencies(this,e),c.getDependencyState(this,this.props,this.state,Object.keys(e))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var o=n(2),a=(r(o),n(3)),s=n(11),u=n(12),c=n(13),f=n(14);e.exports=t.default},function(e,t,n){"use strict";function r(e){var t=u.dependencies(e),n=u.queue(e),r={};Object.keys(n).forEach(function(i){var o=t[i];r[i]=o.deref(e.props,e.state,o.stores),delete n[i]}),e.setState(r)}function i(e,t){var n=u.stores(e);n.forEach(function(e){var n=e.getDispatcher();e.getID()!==t&&n.isDispatching()&&n.waitFor([e.getDispatchToken()])})}function o(e,t){var n=u.queue(e),o=0===Object.keys(n).length;u.storeFields(e)[t].forEach(function(e){n.hasOwnProperty(e)||(n[e]=!0)}),o&&(i(e,t),r(e))}function a(e){for(var t=u.handlers(e);t.length;)t.pop().remove()}function s(e){var t=u.handlers(e),n=u.stores(e);n.forEach(function(n){t.push(n.addOnChange(o.bind(null,e,n.getID())))})}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanupHandlers=a,t.setupHandlers=s;var u=n(3)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t,n){return n[0].get()}function o(e,t){var n=u.dependencies(e),r=u.storeFields(e),o=u.stores(e);Object.keys(t).forEach(function(e){var a,u=t[e];u instanceof f.default?(a=[u],s.default(!n.hasOwnProperty(e),'StoreDependencyMixin: field "%s" is already defined',e),n[e]={deref:i,stores:a}):(a=u.stores,n[e]=u),a.forEach(function(t){var n=t.getID();r.hasOwnProperty(n)||(r[n]=[],o.push(t)),r[n].push(e)})})}Object.defineProperty(t,"__esModule",{value:!0}),t.applyDependencies=o;var a=n(1),s=r(a),u=n(3),c=n(2),f=r(c)},function(e,t,n){"use strict";function r(e,t,n,r){var o=i.dependencies(e);r=r||Object.keys(o);var a={};return r.forEach(function(e){var r=o[e],i=r.deref,s=r.stores;a[e]=i(t,n,s)}),a}Object.defineProperty(t,"__esModule",{value:!0}),t.getDependencyState=r;var i=n(3)},function(e,t,n){"use strict";function r(e,t,n){return s(t[e],n[e])}function i(e,t,n){if(t===n)return!0;var r;for(r in t)if(t.hasOwnProperty(r)&&(!n.hasOwnProperty(r)||!e(r,t,n)))return!1;for(r in n)if(n.hasOwnProperty(r)&&!t.hasOwnProperty(r))return!1;return!0}function o(e,t){return!i(r,e,t)}function a(e,t,n){return!i(function(t,n,r){return e.hasOwnProperty(t)||s(n[t],r[t])},t,n)}Object.defineProperty(t,"__esModule",{value:!0}),t.hasPropsChanged=o,t.hasStateChanged=a;var s=n(16)},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];e.apply(void 0,r)}}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(1),u=r(s),c=n(2),f=r(c),d=n(7),l=r(d),p="Learn more about defining stores: https://github.com/HubSpot/general-store#create-a-store",h=function(){function e(){var t=this;i(this,e),this._facade=null,this._factory=new l.default({getter:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;n>i;i++)r[i-1]=arguments[i];return"function"==typeof t._getter?t._getter.apply(t,r):void 0}}),this._getter=null}return a(e,[{key:"defineGet",value:function(e){return u.default(!this.isRegistered(),"StoreDefinition.defineGet: this store definition cannot be modified because is has already been registered with a dispatcher. %s",p),u.default("function"==typeof e,'StoreDefinition.defineGet: expected getter to be a function but got "%s" instead. %s',e,p),this._getter=e,this}},{key:"defineResponseTo",value:function(e,t){return u.default(!this.isRegistered(),"StoreDefinition.defineResponseTo: this store definition cannot be modified because is has already been registered with a dispatcher. %s",p),this._factory=this._factory.defineResponses([].concat(e).reduce(function(e,n){return e[n]=o(t),e},{})),this}},{key:"getFactory",value:function(){return this._factory}},{key:"isRegistered",value:function(){return this._facade instanceof f.default}},{key:"register",value:function(e){return u.default("function"==typeof this._getter,"StoreDefinition.register: a store cannot be registered without a getter. Use GeneralStore.define().defineGet(getter) to define a getter. %s",p),this._facade||(this._facade=this._factory.register(e)),this._facade}}]),e}();t.default=h,e.exports=t.default},function(e,t){"use strict";function n(e,t){if(e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1;if("function"==typeof e.valueOf&&"function"==typeof t.valueOf){if(e=e.valueOf(),t=t.valueOf(),e===t||e!==e&&t!==t)return!0;if(!e||!t)return!1}return"function"==typeof e.equals&&"function"==typeof t.equals&&e.equals(t)?!0:!1}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default}])});